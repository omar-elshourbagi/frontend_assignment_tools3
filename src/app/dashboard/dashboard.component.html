<div class="dashboard-page">
  <!-- Header -->
  <header class="dashboard-header">
    <div class="header-left">
      <h1 class="logo">Omar's Planner</h1>
      <p class="welcome">Welcome back, e</p>
    </div>
    <div class="header-right">
      <button class="btn-icon search-btn">
        <span class="icon">üîç</span>
        <span class="btn-text">Search</span>
      </button>
      <button class="btn-create" (click)="openCreateForm()">
        <span class="icon">+</span>
        <span class="btn-text">Create Event</span>
      </button>
      <button class="btn-icon logout-btn" (click)="logout()">
        <span class="icon">‚éã</span>
        <span class="btn-text">Logout</span>
      </button>
    </div>
  </header>

  <!-- Main Content -->
  <main class="dashboard-main">
    <!-- Tabs -->
    <div class="tabs-container">
      <button class="tab active">
        All Events <span class="count">({{ allEventsCount }})</span>
      </button>
      <button class="tab">
        Organized <span class="count">({{ organizedEvents.length }})</span>
      </button>
      <button class="tab">
        Invited <span class="count">({{ invitedEvents.length }})</span>
      </button>
    </div>

    <!-- Events Content -->
    <div class="events-content">
      <ng-container *ngIf="allEventsCount === 0; else eventsList">
        <div class="empty-state">
          <p class="empty-message">No events found</p>
          <button class="btn-create-first" (click)="openCreateForm()">Create Your First Event</button>
        </div>
      </ng-container>
      <ng-template #eventsList>
        <div class="events-list">
          <div class="event-card" *ngFor="let ev of allEvents">
            <div class="event-head">
              <h3 class="event-title">{{ ev.title }}</h3>
              <div class="event-meta">
                <span class="pill">{{ ev.date || '‚Äî' }}</span>
                <span class="pill">{{ ev.time || '‚Äî' }}</span>
                <span class="pill">{{ ev.location || '‚Äî' }}</span>
              </div>
            </div>
            <p class="event-desc" *ngIf="ev.description">{{ ev.description }}</p>
          </div>
        </div>
      </ng-template>
    </div>
  </main>
</div>

<!-- Create Event Modal -->
<div class="modal-backdrop" *ngIf="showCreate" (click)="closeCreateForm()"></div>
<div class="modal" *ngIf="showCreate">
  <div class="modal-header">
    <h2>Create Event</h2>
    <button class="close-btn" (click)="closeCreateForm()">‚úï</button>
  </div>
  <form class="modal-body" [formGroup]="createForm" (ngSubmit)="submitCreate()" (click)="$event.stopPropagation()">
    <div class="form-row">
      <label>Title</label>
      <input type="text" placeholder="e.g. Meetup" formControlName="title" />
    </div>
    <div class="grid-2">
      <div class="form-row">
        <label>Date</label>
        <input type="date" formControlName="date" />
      </div>
      <div class="form-row">
        <label>Time</label>
        <input type="time" formControlName="time" />
      </div>
    </div>
    <div class="form-row">
      <label>Location</label>
      <input type="text" placeholder="e.g. Cairo" formControlName="location" />
    </div>
    <div class="form-row">
      <label>Description</label>
      <textarea rows="3" placeholder="Monthly meetup" formControlName="description"></textarea>
    </div>
    <div class="modal-actions">
      <button type="button" class="btn-cancel" (click)="closeCreateForm()">Cancel</button>
      <button class="btn-submit" type="submit" [disabled]="createForm.invalid || loading">
        {{ loading ? 'Creating...' : 'Create Event' }}
      </button>
    </div>
  </form>
</div>
