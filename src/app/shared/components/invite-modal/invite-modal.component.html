<div class="modal-backdrop" (click)="onBackdropClick($event)">
  <div class="modal-content">
    <div class="modal-header">
      <h2 class="modal-title">Invite People</h2>
      <p class="modal-subtitle">to {{ eventTitle }}</p>
      <button class="close-btn" (click)="closeModal()">‚úï</button>
    </div>

    <div class="modal-body">
      <!-- Search Bar -->
      <div class="search-container">
        <span class="search-icon">üîç</span>
        <input
          type="text"
          class="search-input"
          placeholder="Search by name or email..."
          [(ngModel)]="searchQuery"
          (ngModelChange)="onSearchChange($event)"
        />
      </div>

      <!-- Success/Error Messages -->
      <div class="success-message" *ngIf="successMessage">
        ‚úì {{ successMessage }}
      </div>
      <div class="error-message" *ngIf="errorMessage">
        {{ errorMessage }}
      </div>

      <!-- Users List -->
      <div class="users-list">
        <!-- Loading State -->
        <div *ngIf="loading" class="loading-users">
          <div class="spinner"></div>
          <p>Loading users...</p>
        </div>

        <!-- No Users Found -->
        <div *ngIf="!loading && filteredUsers.length === 0" class="no-users">
          <p>{{ searchQuery ? 'No users match your search' : 'No users found' }}</p>
        </div>

        <!-- Users -->
        <div
          *ngFor="let user of filteredUsers"
          class="user-card"
          [class.selected]="selectedUser?.id === user.id"
          (click)="selectUser(user)"
        >
          <div class="user-avatar">
            {{ user.name?.charAt(0)?.toUpperCase() || '?' }}
          </div>
          <div class="user-info">
            <span class="user-name">{{ user.name || 'Unknown' }}</span>
            <span class="user-email">{{ user.email }}</span>
          </div>
          <div class="select-indicator" *ngIf="selectedUser?.id === user.id">
            ‚úì
          </div>
        </div>
      </div>
    </div>

    <div class="modal-footer">
      <button class="btn-cancel" (click)="closeModal()">Cancel</button>
      <button
        class="btn-invite"
        [disabled]="!selectedUser || inviting"
        (click)="inviteUser()"
      >
        {{ inviting ? 'Inviting...' : 'Invite Selected User' }}
      </button>
    </div>
  </div>
</div>

